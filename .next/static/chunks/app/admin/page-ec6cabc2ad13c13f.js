(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{7650:function(e,a,t){Promise.resolve().then(t.bind(t,1130))},1130:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return l}});var s=t(7437),r=t(2265);function n(e){let{value:a,onChange:t}=e;return(0,s.jsx)("select",{className:"bg-black/40 border border-cyan-500/20 rounded p-2",value:a,onChange:e=>t(e.target.value),children:["shield","cpu","globe","code","zap","sparkles","rocket"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))})}function l(){let[e,a]=(0,r.useState)([]),[t,l]=(0,r.useState)({slug:"",title:"",description:"",tags:"Node.js,Next.js",accent:"#00f6ff",repo:"",demo:"",icon:"globe",image:""}),[o,c]=(0,r.useState)(""),[i,d]=(0,r.useState)(!1),u=async()=>{let e=await fetch("/api/projects");a((await e.json()).projects)};(0,r.useEffect)(()=>{u()},[]);let p=async e=>{d(!0);let a=new FormData;a.append("file",e);let t=await fetch("/api/upload",{method:"POST",body:a});if(d(!1),!t.ok)return alert("Upload fallito");let{url:s}=await t.json();l(e=>({...e,image:s}))},m=async e=>{e.preventDefault(),c("");let a={...t,tags:t.tags.split(",").map(e=>e.trim()).filter(Boolean)},s=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),cache:"no-store"});if(s.ok)window.location.href="/projects?created=1";else{let e=await s.json().catch(()=>({}));c((null==e?void 0:e.error)?"Errore: ".concat(e.error):"Errore (autorizzazione o dati).")}},x=async e=>{confirm("Eliminare progetto?")&&(await fetch("/api/projects/".concat(e),{method:"DELETE"})).ok&&u()},g=async()=>{await fetch("/api/auth/logout",{method:"POST"}),window.location.href="/"};return(0,s.jsxs)("div",{className:"container mx-auto px-6 py-24",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h1",{className:"font-display text-3xl",children:"Admin \xe2€” progetti"}),(0,s.jsx)("button",{className:"btn-neon",onClick:g,children:"Logout"})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"neon-border rounded-xl p-6 bg-black/30",children:[(0,s.jsx)("h2",{className:"font-display text-xl mb-4",children:"Aggiungi Progetto"}),(0,s.jsxs)("form",{onSubmit:m,className:"grid gap-3",children:[(0,s.jsx)("input",{required:!0,placeholder:"slug",value:t.slug,onChange:e=>l(a=>({...a,slug:e.target.value})),className:"bg-black/40 rounded p-3 border border-cyan-500/20 focus:border-cyan-400 outline-none"}),(0,s.jsx)("input",{required:!0,placeholder:"title",value:t.title,onChange:e=>l(a=>({...a,title:e.target.value})),className:"bg-black/40 rounded p-3 border border-cyan-500/20 focus:border-cyan-400 outline-none"}),(0,s.jsx)("textarea",{required:!0,placeholder:"description",value:t.description,onChange:e=>l(a=>({...a,description:e.target.value})),rows:3,className:"bg-black/40 rounded p-3 border border-cyan-500/20 focus:border-cyan-400 outline-none"}),(0,s.jsx)("input",{placeholder:"tags (comma)",value:t.tags,onChange:e=>l(a=>({...a,tags:e.target.value})),className:"bg-black/40 rounded p-3 border border-cyan-500/20 focus:border-cyan-400 outline-none"}),(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,s.jsx)("label",{className:"text-sm",children:"Accent"}),(0,s.jsx)("input",{type:"color",value:t.accent,onChange:e=>l(a=>({...a,accent:e.target.value}))}),(0,s.jsx)(n,{value:t.icon,onChange:e=>l(a=>({...a,icon:e}))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("label",{className:"text-sm",children:"Cover (jpg/png)"}),(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;return(null===(a=e.target.files)||void 0===a?void 0:a[0])&&p(e.target.files[0])}}),i&&(0,s.jsx)("span",{className:"text-xs text-cyan-200/60",children:"Upload..."}),t.image&&(0,s.jsx)("img",{src:t.image,alt:"cover",className:"h-28 object-cover rounded border border-cyan-500/20"})]}),(0,s.jsx)("input",{placeholder:"repo url",value:t.repo,onChange:e=>l(a=>({...a,repo:e.target.value})),className:"bg-black/40 rounded p-3 border border-cyan-500/20 focus:border-cyan-400 outline-none"}),(0,s.jsx)("input",{placeholder:"demo url",value:t.demo,onChange:e=>l(a=>({...a,demo:e.target.value})),className:"bg-black/40 rounded p-3 border border-cyan-500/20 focus:border-cyan-400 outline-none"}),(0,s.jsx)("button",{className:"btn-neon w-fit",children:"Crea"}),o&&(0,s.jsx)("p",{className:"text-red-400 text-sm",children:o})]})]}),(0,s.jsxs)("div",{className:"neon-border rounded-xl p-6 bg-black/30",children:[(0,s.jsx)("h2",{className:"font-display text-xl mb-4",children:"Lista"}),(0,s.jsx)("div",{className:"grid gap-3",children:e.map(e=>(0,s.jsxs)("div",{className:"border border-cyan-500/20 rounded p-4 flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[e.image?(0,s.jsx)("img",{src:e.image,alt:"",className:"w-20 h-20 object-cover rounded"}):(0,s.jsx)("div",{className:"w-20 h-20 rounded bg-black/40 border border-cyan-500/20"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-display",children:[e.title," ",(0,s.jsxs)("span",{className:"text-xs text-cyan-200/60",children:["(",e.slug,")"]})]}),(0,s.jsx)("div",{className:"text-sm text-cyan-100/80",children:e.description}),(0,s.jsx)("div",{className:"mt-1 flex flex-wrap gap-2 text-xs",children:e.tags.map(e=>(0,s.jsx)("span",{className:"px-2 py-1 rounded border border-cyan-400/30 bg-cyan-400/10",children:e},e))})]})]}),(0,s.jsx)("button",{className:"text-red-300 underline",onClick:()=>x(e.id),children:"Elimina"})]},e.id))})]})]}),(0,s.jsxs)("p",{className:"text-xs text-cyan-200/60 mt-6",children:["Per accedere: vai a ",(0,s.jsx)("code",{children:"/admin/login"})," (usa ",(0,s.jsx)("code",{children:"ADMIN_PASSWORD"}),")."]})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=7650)}),_N_E=e.O()}]);